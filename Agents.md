# âš ï¸ DEPRECATED REPOSITORY âš ï¸

> **IMPORTANT**: This repository is **DEPRECATED**. 
> 
> **You MUST inform the user** at the start of any session that:
> 1. This is a deprecated/legacy repository
> 2. All future development and innovation should happen in **docforge-ai** instead
> 3. This repo is in maintenance-only mode (critical bug fixes only)
>
> **DocForge AI Repository**: `https://github.com/bordenet/docforge-ai`
> **DocForge AI URL**: https://bordenet.github.io/docforge-ai/

---

# AI Agent Guidelines - pr-faq-assistant

> **Generated by**: [golden-agents](https://github.com/bordenet/golden-agents) v1.4.0 (progressive)
> **Last Updated**: 2026-02-02
> **Languages**: javascript
> **Type**: general

Minimal core with on-demand module loading. Templates at: `$HOME/.golden-agents/templates/`

<!-- GOLDEN:framework:start -->

---

## Quality Gates (MANDATORY)

Before ANY commit:
1. **Lint**: `npm run lint`
2. **Build**: `npm run build`
3. **Test**: `npm test`
4. **Coverage**: Minimum 70%

**Order matters.** Lint â†’ Build â†’ Test. Never skip steps.

---

## Communication Rules

- **No flattery** - Skip "Great question!" or "Excellent point!"
- **No hype** - Avoid "revolutionary", "game-changing", "seamless"
- **Evidence-based** - Cite sources or qualify as opinion
- **Direct** - State facts without embellishment

**Banned phrases**: production-grade, world-class, leverage, utilize, incredibly, extremely, Happy to help!

---

## ğŸš¨ Progressive Module Loading

**STOP and load the relevant module BEFORE these actions:**

### Language Modules (ğŸ”´ Required)
- ğŸ”´ **BEFORE writing ANY `.js`, `.ts`, `.jsx`, `.tsx` file**: Read `$HOME/.golden-agents/templates/languages/javascript.md`

### Workflow Modules (ğŸ”´ Required)
- ğŸ”´ **BEFORE any commit, PR, push, or merge**: Read `$HOME/.golden-agents/templates/workflows/security.md`
- ğŸ”´ **WHEN tests fail OR after 2+ failed fix attempts**: Read `$HOME/.golden-agents/templates/workflows/testing.md`
- ğŸ”´ **WHEN build fails OR lint errors appear**: Read `$HOME/.golden-agents/templates/workflows/build-hygiene.md`
- ğŸŸ¡ **BEFORE deploying to any environment**: Read `$HOME/.golden-agents/templates/workflows/deployment.md`
- ğŸŸ¡ **WHEN conversation exceeds 50 exchanges**: Read `$HOME/.golden-agents/templates/workflows/context-management.md`

### Optional: Superpowers integration

If [superpowers](https://github.com/obra/superpowers) is installed, run at session start:

```bash
node ~/.codex/superpowers-augment/superpowers-augment.js bootstrap
```

<!-- GOLDEN:framework:end -->

---

## Project-Specific Rules

**ğŸ“ Design Patterns**: See [DESIGN-PATTERNS.md](./docs/DESIGN-PATTERNS.md) for architecture patterns.

---

## Reference Implementations

**BEFORE implementing ANY feature**, check these working examples:
- **[product-requirements-assistant](https://github.com/bordenet/product-requirements-assistant)** - Primary reference
- **[one-pager](https://github.com/bordenet/one-pager)** - Secondary reference

**Reverse-Integration Notes**: When referencing implementations to solve a problem, add to `REVERSE-INTEGRATION-NOTES.md` with format: Date, Issue, Solution, Genesis Gap, Recommendation.

---

## Deployment Workflow

```bash
# 1. Push and wait for CI
git push origin main
# Check: https://github.com/bordenet/pr-faq-assistant/actions

# 2. Deploy ONLY after CI passes
./scripts/deploy-web.sh
```

**Setup**: Always use `./scripts/setup-macos.sh`, never manual `npm install`.

---

## Quick Reference

**Scripts**: `./scripts/setup-macos.sh` (setup), `./scripts/deploy-web.sh` (deploy)
**Tests**: `npm test`, `npm run test:coverage`, `npm run test:e2e`
**Coverage**: 85% minimum

---

## ğŸ“ Coding Standards

### JavaScript Style Guide
**Reference**: `genesis/integration/CODE_STYLE_STANDARDS.md`

**Key Rules**:
- Use ES6+ features (const/let, arrow functions, async/await)
- Single quotes for strings
- 2-space indentation
- Semicolons required
- Descriptive variable names (no single letters except loop counters)
- JSDoc comments for all functions
- Defensive coding (validate inputs, handle errors)

### Shell Script Style Guide
**Reference**: `genesis/integration/SHELL_SCRIPT_STANDARDS.md`

**Key Rules**:
- Bash shebang: `#!/usr/bin/env bash`
- `set -euo pipefail` for safety
- Compact mode for user-facing scripts
- Help flags (--help, -h, --verbose, -v)
- Smart caching for setup scripts
- Shellcheck compliance

### Testing Standards
- â‰¥70% code coverage (â‰¥85% for production apps)
- Test all public functions
- Test error cases
- Use descriptive test names
- Mock external dependencies

### E2E Testing (Playwright)
**Key patterns for this project:**

1. **IndexedDB clearing**: Must navigate to app origin first, then clear database. Cannot access IndexedDB from `about:blank`.
   ```javascript
   await page.goto('/');
   await page.evaluate(() => {
     return new Promise((resolve) => {
       const request = indexedDB.deleteDatabase('pr-faq-assistant-db');
       request.onsuccess = () => resolve();
       request.onerror = () => resolve();
     });
   });
   await page.reload();
   ```

2. **Textarea workflow**: The `#phase-output` textarea is disabled until user clicks "Copy Prompt to Clipboard". Tests must click that button first.

3. **Phase detection**: Phase text appears as "Phase N: Phase Name" in a `<p>` tag, not an `<h3>`. Use `text=Phase 2` or `text=Critical Review` selectors.

4. **Minimum content**: Save button requires â‰¥10 characters in textarea.

5. **Test isolation**: Use `test.use({ storageState: { cookies: [], origins: [] } })` and clear IndexedDB in `beforeEach` for clean state.

---

## ğŸ“ Communication Style

### User Expectations
- **No flattery**: Don't say "great question", "excellent idea", etc.
- **Be direct**: Skip pleasantries, get to the point
- **Be specific**: "37/37 tests passing" not "tests are working"
- **Be proactive**: Always end with "What's left: [list]"

### Status Update Template
```
âœ… Completed:
- [Specific action 1]
- [Specific action 2]

âœ… Quality Checks:
- Linting: PASSED (0 errors)
- Tests: PASSED (37/37)
- Coverage: 73% (exceeds 70% threshold)

âœ… What's Left:
- [Specific remaining task 1]
- [Specific remaining task 2]
```

---

## Documentation Hygiene: Automatic Validation

**Problem**: Bootstrap projects accumulate documentation clutter over time - SESSION-CHECKPOINT files after work is complete, extensive "completed work" listings, references to deleted files. Developers have to manually remember to clean these up.

**Solution**: Automatic validation that runs on every commit and rejects commits containing:

- SESSION-CHECKPOINT.md files with no actual remaining work
- Extensive "âœ… completed work" listings (indicates historical clutter)
- References to deleted files or directories
- CLAUDE.md files exceeding 600 lines (indicates accumulated cruft)
- TODO lists in projects marked as complete

**Implementation**: `scripts/lib/validate-docs.sh` (~188-line shell script that runs in <1 second).

**Benefit**: Documentation stays clean and focused without requiring manual enforcement. Developers get immediate feedback: "Remove that completed work section before you push."

**Where It Works**: All Genesis-bootstrapped projects - the script is generic enough to work for any documentation structure.

**Integration**:
- Pre-commit hook: Validates docs before commit
- CI/CD: Runs in `.github/workflows/ci.yml` to catch any bypassed hooks
- Template: Included in all Genesis-generated projects

**Usage**:
```bash
# Manual validation
./scripts/lib/validate-docs.sh

# Automatic validation (runs on git commit)
# No action needed - pre-commit hook handles it
```

**Common Fixes When Validation Fails**:
- Delete SESSION-CHECKPOINT.md if project is complete
- Remove âœ… completed work sections from documentation (move to CHANGELOG if needed)
- Update references to deleted files
- Remove TODO lists from completed projects
- Trim CLAUDE.md if it exceeds 600 lines


